# ===========================================
# Protego Backend Environment Configuration
# ===========================================
# Copy this file to .env and fill in your actual values

# Database Configuration
# PostgreSQL connection string
DATABASE_URL=postgresql://protego_user:protego_pass@localhost:5432/protego

# Twilio SMS Configuration
# Get these from https://console.twilio.com/
TWILIO_ACCOUNT_SID=your_account_sid_here
TWILIO_AUTH_TOKEN=your_auth_token_here
TWILIO_FROM=+1234567890

# IMPORTANT: Test mode prevents real SMS from being sent
# Set to false in production!
TEST_MODE=false

# Alert Configuration
# Confidence threshold (0.0-1.0) for triggering alerts
ALERT_CONFIDENCE_THRESHOLD=0.8
# Countdown seconds before alert is triggered (gives user time to cancel)
ALERT_COUNTDOWN_SECONDS=5

# Security Configuration
# Generate a secure random secret key: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your-super-secret-key-change-in-production-min-32-chars
ALGORITHM=HS256

# CORS Configuration
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000,https://yourdomain.com

# Environment
# Options: development, staging, production
ENVIRONMENT=development

# Frontend URL (for generating live tracking links)
FRONTEND_URL=http://localhost:5173

# AI Services Configuration
# Whisper API for audio transcription
WHISPER_ENDPOINT=https://chutes-whisper-large-v3.chutes.ai/transcribe
WHISPER_API_KEY=your_chutes_api_key_here

# MegaLLM API for AI analysis
MEGALLM_ENDPOINT=https://ai.megallm.io/v1/chat/completions
MEGALLM_API_KEY=your_megallm_api_key_here
MEGALLM_MODEL=claude-opus-4-5-20251101
# Fallback models: claude-sonnet-4-5-20250929, claude-haiku-4-5-20251001, glm-4.6

# Azure OpenAI Realtime API (for Azure-based real-time voice - all-in-one STT+TTS+LLM)
AZURE_OPENAI_REALTIME_ENDPOINT=wss://your-resource.openai.azure.com
AZURE_OPENAI_REALTIME_API_KEY=your_azure_openai_api_key_here
AZURE_OPENAI_REALTIME_DEPLOYMENT=gpt-4o-realtime-preview

# Deepgram API (for Speech-to-Text in Deepgram+ElevenLabs mode)
DEEPGRAM_API_KEY=your_deepgram_api_key_here
DEEPGRAM_MODEL=nova-2

# ElevenLabs API (for Text-to-Speech in Deepgram+ElevenLabs mode)
# Note: LLM uses MegaLLM (configured above)
ELEVENLABS_API_KEY=your_elevenlabs_api_key_here
ELEVENLABS_VOICE_ID=EXAVITQu4vr4xnSDxMaL  # Sarah - Mature, Reassuring
ELEVENLABS_MODEL=eleven_turbo_v2_5  # Fast, low-latency model

# Vonage Voice API Configuration (for emergency voice calls)
# Get these from https://dashboard.nexmo.com/
VONAGE_API_KEY=your_vonage_api_key_here
VONAGE_API_SECRET=your_vonage_api_secret_here
VONAGE_APPLICATION_ID=your_vonage_application_id_here
# Path to your Vonage private key file
VONAGE_PRIVATE_KEY_PATH=./vonage_private.key
# Your Vonage phone number (E.164 format: +919056690327)
VONAGE_NUMBER=+1234567890

# Cloudflare R2 Configuration (for incident media uploads)
# Get these from Cloudflare Dashboard > R2 > Manage R2 API Tokens
R2_ACCOUNT_ID=your_cloudflare_account_id
R2_ACCESS_KEY_ID=your_r2_access_key_id
R2_SECRET_ACCESS_KEY=your_r2_secret_access_key
R2_BUCKET_NAME=protego-incidents
# Public URL for your R2 bucket (after enabling public access)
R2_PUBLIC_URL=https://pub-xxxxxxxxxxxxx.r2.dev

# Safety Call Configuration
# Enable/disable the AI safety call feature
SAFETY_CALL_ENABLED=true
# Maximum call duration in minutes (to prevent runaway costs)
SAFETY_CALL_MAX_DURATION_MINUTES=10
# Confidence threshold (0.0-1.0) for triggering alerts during safety calls
SAFETY_CALL_ALERT_THRESHOLD=0.75
# Provider selection: "azure" (all-in-one) or "deepgram_elevenlabs" (modular, cheaper)
SAFETY_CALL_PROVIDER=azure

# Sentry Error Tracking (optional but recommended for production)
# Get your DSN from https://sentry.io/
SENTRY_DSN=
# Sample rates (0.0-1.0)
SENTRY_TRACES_SAMPLE_RATE=1.0  # 100% in dev, reduce to 0.1-0.2 in production
SENTRY_PROFILES_SAMPLE_RATE=1.0  # 100% in dev, reduce to 0.1-0.2 in production

# ===========================================
# Production Deployment Checklist
# ===========================================
# Before deploying to production, ensure:
# 1. TEST_MODE=false (critical!)
# 2. ENVIRONMENT=production
# 3. SECRET_KEY is a strong random value (not the example above)
# 4. SENTRY_DSN is configured for error tracking
# 5. All API keys are production keys (not test/sandbox keys)
# 6. ALLOWED_ORIGINS includes your production domain
# 7. Database connection uses SSL (add ?sslmode=require to DATABASE_URL)
